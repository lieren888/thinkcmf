<include file="public@header" />
</head>

<body>
    <div class="wrap js-check-wrap">
        <ul class="nav nav-tabs">
            <li><a href="{:url('AdminModelx/index')}">模型管理</a></li>
            <li><a href="{:url('AdminModelx/add')}">添加模型</a></li>
            <li class="active"><a>编辑模型</a></li>
        </ul>
        <div style="padding: 10px 15px; background: #e8edf0;">在线添加修改删除模型，管理模型字段和相关模型数据</div>
        <div class="row margin-top-20">
            <div class="col-md-6">
                <form class="js-ajax-form" action="{:url('AdminModelx/editPost')}" method="post">
                    <div class="row">
                        <div class="col-md-9">
                            <table class="table table-bordered">
                                <tr>
                                    <th>模型名称<span class="form-required">*</span></th>
                                    <td>
                                        <input class="form-control" type="text" name="post[name]" id="name" required
                                            value="{$post.name}" placeholder="请输入模型名称" />
                                    </td>
                                </tr>
                                <tr>
                                    <th>表名<span class="form-required">*</span></th>
                                    <td>
                                        <input class="form-control" type="text" name="post[table]" id="table" required
                                            value="{$post.table}" placeholder="建议以cms_appxxx格式为名" readonly />
                                    </td>
                                </tr>
                                <tr>
                                    <th>栏目页模板</th>
                                    <td>
                                        <select class="form-control" name="post[channeltpl]" id="input-channeltpl">
                                            <option value="">--可选--</option>
                                            <foreach name="channeltpl" item="vo">
                                                <php>$value=preg_replace('/^cms\//','',$vo['file']);</php>
                                                <option value="{$value}">{$vo.file}.html</option>
                                            </foreach>
                                        </select>
                                        自定义模板文件必须以channel开头
                                    </td>
                                </tr>
                                <tr>
                                    <th>列表页模板<span class="form-required">*</span></th>
                                    <td>
                                        <select class="form-control" name="post[listtpl]" id="input-listtpl">
                                            <foreach name="listtpl" item="vo">
                                                <php>$value=preg_replace('/^cms\//','',$vo['file']);</php>
                                                <option value="{$value}">{$vo.file}.html</option>
                                            </foreach>
                                        </select>
                                        自定义模板文件必须以list开头
                                    </td>
                                </tr>
                                <tr>
                                    <th>详情页模板<span class="form-required">*</span></th>
                                    <td>
                                        <select class="form-control" name="post[showtpl]" id="input-showtpl">
                                            <foreach name="showtpl" item="vo">
                                                <php>$value=preg_replace('/^cms\//','',$vo['file']);</php>
                                                <option value="{$value}">{$vo.file}.html</option>
                                            </foreach>
                                        </select>
                                        自定义模板文件必须以show开头
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="hidden" name="post[id]" value="{$post.id}">
                        <button type="submit" class="btn btn-primary js-ajax-submit" data-refresh="0">{:lang('SAVE')}
                        </button>
                        <a class="btn btn-default" href="{:url('AdminModelx/index')}">{:lang('BACK')}</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="__STATIC__/js/admin.js"></script>
    <script>
        $(function () {
            $('#input-channeltpl').val("{$post.channeltpl|default=''}");
            $('#input-listtpl').val("{$post.listtpl|default=''}");
            $('#input-showtpl').val("{$post.showtpl|default=''}");
        })
    </script>
</body>

</html>