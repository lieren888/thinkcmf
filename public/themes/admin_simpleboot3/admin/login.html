<!DOCTYPE html>
<html lang="zh-cn" >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport"/>
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<meta name="renderer" content="webkit"/>
<meta name="HandheldFriendly" content="true"/>
<meta name="format-detection" content="telephone=no, email=no" />
<meta name="Keywords" content="" />
<meta name="Description" content="" />
<link rel="shortcut icon" href="/favicon.ico" /><title>GraphicTech - 后台管理系统</title>
<link rel="stylesheet" type="text/css" href="__TMPL__/public/assets/login/layui.css" />
<link rel="stylesheet" type="text/css" href="__TMPL__/public/assets/login/global.css" />
<link rel="stylesheet" type="text/css" href="__TMPL__/public/assets/login/animate.css" />
<link rel="stylesheet" type="text/css" href="__TMPL__/public/assets/login/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="__TMPL__/public/assets/login/login.css" />
<link rel="stylesheet" type="text/css" href="__TMPL__/public/assets/login/loaders.css" />
<script type="text/javascript">var wwwroot='/';var absroot='/';var module_name='admin';</script>
<script type="text/javascript" src="__TMPL__/public/assets/login/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="__TMPL__/public/assets/login/layui.js"></script>
<script type="text/javascript" src="__TMPL__/public/assets/login/global.js"></script>
<script type="text/javascript" src="__TMPL__/public/assets/login/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="__TMPL__/public/assets/login/loaders.css.js"></script>
</head>
<body>

<!--[if lt IE 10]> 
<p style="text-align: center;padding-top:100px;">请使用高版本浏览器进入后台管理（建议浏览器：Firefox、Chrome）</p>
<p><a href="http://www.firefox.com.cn/">下载Firefox浏览器</a></p>
<p><a href="http://www.google.cn/chrome/browser//">下载Chrome浏览器</a></p>
<div style="display:none">
<![endif]--> 

<div id="login">
    <h1>
         <strong><span class="en-font">GraphicTech</span>内容管理系统后台</strong>
         <em class="en-font">Management System</em>
    </h1>
    
    <div class="user info">
        <label>U</label>
        <input type="text" name="data[User][username]" value="" id="UserUsername"  class="en-font" placeholder="账号" autocomplete="off">
    </div>
    <div class="pwd info">
        <label>P</label>
        <input type="password" name="data[User][password]" value="" id="UserPassword"  class="en-font" placeholder="密码" autocomplete="off">
    </div>
    <div class="code info">
        <label>V</label>
        <input type="text" name="captcha" value="" id=""  class="en-font" autocomplete="off" placeholder="验证码">
        <span class="vimg"><img  src="/captcha.html" id="captchaimg" class="tooltip" onclick="this.src='/captcha.html?'+Math.random()"/></span>
    </div>
    <div class="sub">
        <input  type="submit" id="loginSubmit" value="立即登录"/>
    </div>
    <div class="copy"><a href="https://www.lancai-int.com/" target="_blank">© GraphicTech 版权所有</a></div>
</div>
<div class="auth">
    <div class="loading"><div class="loader-inner ball-clip-rotate-multiple"></div></div>
    <p>验证中...</p>
</div>

<script type="text/javascript">
layui.use(['layer', 'carousel'],function(){
    'use strict';
    var layer=layui.layer;
});

$('body').keydown(function(e){
    if (e.keyCode == 13) {
        $('#loginSubmit').trigger('click') ;
    }
})

var isLogining = false;
$('#loginSubmit').click(function(){
    if (isLogining) return false;
    isLogining = true;
    layer.closeAll();
    var username = $.trim($('#UserUsername').val());
    if (!username) {
        layer.alert('请填写用户名', {
            shade : 0,
            anim : 2,
            offset : '10px',
            time : 3000,
            icon : 2
        });
        isLogining = false;
        return false;
    }
    var password = $.trim($('#UserPassword').val());
    if (!password) {
        layer.alert('请填写密码', {
            shade : 0,
            anim : 2,
            offset : '10px',
            time : 3000,
            icon : 2
        });
        isLogining = false;
        return false;
    }
    var captcha = $.trim($('input[name="captcha"]').val());
    if (!captcha) {
        layer.alert('请填写验证码', {
            shade : 0,
            anim : 2,
            offset : '10px',
            time : 3000,
            icon : 2
        });
        isLogining = false;
        return false;
    }
    
    $('#login').addClass('checking');
    setTimeout(function(){
        $('#login').animate({
            'margin-left' : -450
        }, 200, 'easeOutQuint')
        $('.auth').addClass('checking');
    }, 500)
    
    setTimeout(function(){
        $.post("/admin/public/doLogin.html",{
            username : username,
            password : password,
            captcha : captcha
        }, function(data){
            isLogining = false;
            var json = data;
            if (json['code'] == '1') {
                layer.alert(json['msg'], {
                    shade : 0,
                    anim : 2,
                    offset : '10px',
                    time : 3000,
                    title:'成功',
                    icon: 6
                });
                setTimeout(function(){
                    location.href = json['url'];
                }, 800)
                
                
            } else {
                $('#login').animate({
                    'margin-left' : -180
                }, 200, 'easeOutQuint')
                $('.auth').removeClass('checking');
                setTimeout(function(){
                    $('#login').removeClass('checking');                    
                }, 250)
                setTimeout(function(){
                    $('#captchaimg').trigger('click');
                    layer.alert(json['msg'], {
                        shade : 0,
                        anim : 2,
                        offset : '10px',
                        time : 3000,
                        title:'失败',
                        icon: 5
                    });
                }, 550)
            }
        })
    }, 1500)
    
})
</script>
<!--[if lt IE 10]>
    </div>
<![endif]--> 
</body>
</html>